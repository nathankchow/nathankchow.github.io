	<!DOCTYPE html>
	<html>

	<style>
	body {
		background-color:rgb(32,28,28);
		color:rgb(169,169,169) ;
		font-family: sans-serif;
	}

	</style>

	<head>
		<meta charset="UTF-8">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script src="jquery.csv.min.js"></script>
	</head>

	<center>
	<body>

	<h2>Work in progress...</h2>

	<div id="video-player">

		<iframe width="900" height="450" allow="fullscreen;"
			id = "embed-video" src="https://www.youtube.com/embed/F5o494pRTPs">
		</iframe>

	</div>

	<div id="song-selector">
		<label for="つぼみ"> 
			<input id="つぼみ" type="radio" name="song" value="つぼみ" checked='checked'>つぼみ
		</label>
		<label for="Default (Nagi solo)"> 
			<input id="Default (Nagi solo)" type="radio" name="song" value="default">Default (Koharu Nagi solo)
		</label>

		<!--
		<label for="夢をのぞいたら"> 
			<input id="夢をのぞいたら" type="radio" name="song" value="夢をのぞいたら">夢をのぞいたら
		</label>
		-->
	</div>

	<div id="idol-selector">
		<select name="idol1" id="idol1" onchange='selectcontrol("1")'>
			<option value="Arisu" selected='selected'>Arisu</option>
			<option value="Koharu">Koharu</option>
			<option value="Yoshino">Yoshino</option>
			<option value="Yukimi">Yukimi</option>
			<option value="Yumi">Yumi</option>
		</select>
		
		<select name="idol2" id="idol2" onchange='selectcontrol("2")'>
			<option value="Arisu">Arisu</option>
			<option value="Koharu" selected='selected'>Koharu</option>
			<option value="Yoshino">Yoshino</option>
			<option value="Yukimi">Yukimi</option>
			<option value="Yumi">Yumi</option>
		</select>

		<select name="idol3" id="idol3" onchange='selectcontrol("3")'>
			<option value="Arisu">Arisu</option>
			<option value="Koharu">Koharu</option>
			<option value="Yoshino" selected='selected'>Yoshino</option>
			<option value="Yukimi">Yukimi</option>
			<option value="Yumi">Yumi</option>
		</select>

		<select name="idol4" id="idol4" onchange='selectcontrol("4")'>
			<option value="Arisu">Arisu</option>
			<option value="Koharu">Koharu</option>
			<option value="Yoshino">Yoshino</option>
			<option value="Yukimi" selected='selected'>Yukimi</option>
			<option value="Yumi">Yumi</option>
		</select>

		<select name="idol5" id="idol5" onchange='selectcontrol("5")'>
			<option value="Arisu">Arisu</option>
			<option value="Koharu">Koharu</option>
			<option value="Yoshino">Yoshino</option>
			<option value="Yukimi">Yukimi</option>
			<option value="Yumi" selected='selected'>Yumi</option>
		</select>
	</div>

	<div id="submit-button">
		<input id="Go" type="button" value="Go" onclick="setYoutubeVideo()"/>
	</div>

	<script>
		//function for automatically changing idol names so no duplicates occur 
		function selectcontrol(number) {


			var changed_idols = document.getElementById("idol" + number);
			var idol = changed_idols.options[changed_idols.selectedIndex].value;
	
			for (i=1;i<6;i++){
				if('' + i != number){
					var other_idols = document.getElementById("idol" + i);
					var other_idol = other_idols.options[other_idols.selectedIndex].value
					if (other_idol==idol) {
						var wrong_index = i;
						break;
					}
				}
			}
			var idol1s = document.getElementById("idol1");
			var idol1 = idol1s.options[idol1s.selectedIndex].value.toLowerCase();

			var idol2s = document.getElementById("idol2");
			var idol2 = idol2s.options[idol2s.selectedIndex].value.toLowerCase();

			var idol3s = document.getElementById("idol3");
			var idol3 = idol3s.options[idol3s.selectedIndex].value.toLowerCase();

			var idol4s = document.getElementById("idol4");
			var idol4 = idol4s.options[idol4s.selectedIndex].value.toLowerCase();

			var idol5s = document.getElementById("idol5");
			var idol5 = idol5s.options[idol5s.selectedIndex].value.toLowerCase();

			
			var existing_idols = idol1 + idol2 + idol3 + idol4 + idol5;
			console.log(existing_idols)
			var all_idols = ['arisu','koharu','yoshino','yukimi','yumi']
			all_idols.forEach(function (item, index){
				console.log(existing_idols.includes(item))
				if (existing_idols.includes(item) == false) {
					console.log('i do actually work!')
					console.log(wrong_index + item)//
					$('#idol' + wrong_index).val(item[0].toUpperCase() + item.slice(1)).change();
				}
			})
			
		}
		</script>


		
	
	<script>
		function setYoutubeVideo() {
			//from https://stackoverflow.com/questions/23762822/javascript-loading-csv-file-into-an-array
			$.ajax({
    				url: "https://raw.githubusercontent.com/nathankchow/nathankchow.github.io/master/video_catalog.csv",
    				async: false,
    				success: function (csvd) {
        			data = $.csv.toArrays(csvd);
    				},
    				dataType: "text",
	
				});

			var songs = document.getElementsByName("song");
			for(i=0;i<songs.length;i++) {
				if (songs[i].checked){
					var song = songs[i].value
				}
			}

			var idol1s = document.getElementById("idol1");
			var idol1 = idol1s.options[idol1s.selectedIndex].value.toLowerCase();

			var idol2s = document.getElementById("idol2");
			var idol2 = idol2s.options[idol2s.selectedIndex].value.toLowerCase();	

			var idol3s = document.getElementById("idol3");
			var idol3 = idol3s.options[idol3s.selectedIndex].value.toLowerCase();

			var idol4s = document.getElementById("idol4");
			var idol4 = idol4s.options[idol4s.selectedIndex].value.toLowerCase();

			var idol5s = document.getElementById("idol5");
			var idol5 = idol5s.options[idol5s.selectedIndex].value.toLowerCase();

			var youtube_title = "デレステ " + song + " " + idol1 + " " + idol2 + " " + idol3 + " " + idol4 + " " + idol5;
			
			for (i=0;i<data.length;i++) {
				
				if (youtube_title == data[i][0]) {
					var youtubeId = data[i][1];
					break;
				}
				else {
					var youtubeId = 'F5o494pRTPs'
				}
				
			}
			var youtubeLink = "https://www.youtube.com/embed/" + youtubeId
			document.getElementById("embed-video").src = youtubeLink		
		}
	</script>

	</center>
	</body>
	</html>